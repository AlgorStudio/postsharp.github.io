---
layout: post
title: "Language Extension"
date: 2008-12-12 09:02:59 +01:00
categories: [General]
permalink: /post/language-extension.html
---
<h1>Extending the Language</h1>
<div>
   
   <p>The most popular approach so far has been to define extensions to the base 
      language, i.e. a new language based on the language of the aspected code. 
      The de-facto standard in the Java culture is <span>
      <a href="http://http://www.eclipse.org/aspectj">AspectJ</a></span>. 
      The following example is taken from the <span>
      <a href="http://www.eclipse.org/aspectj/doc/released/progguide/language-anatomy.html">
      AspectJ Programming Guide</a></span>:</p>
   <pre xml:lang="java"> 1 aspect FaultHandler {
 2
 3   private boolean Server.disabled = false;
 4
 5   private void reportFault() {
 6     System.out.println(&quot;Failure! Please fix it.&quot;);
 7   }
 8
 9   public static void fixServer(Server s) {
10     s.disabled = false;
11   }
12
13   pointcut services(Server s): target(s) &amp;&amp; call(public * *(..));
14
15   before(Server s): services(s) {
16     if (s.disabled) throw new DisabledException();
17   }
18
19   after(Server s) throwing (FaultException e): services(s) {
20     s.disabled = true;
21     reportFault();
22   }
23 }
</pre>
   <p>As you can see, lines 3-11 is pure Java but 13-22 use the AspectJ 
      extension. Even if the purpose of this section is not to explain the 
      AspectJ syntax, note the <em>pointcut</em>, <em>before</em> and <em>after</em> 
      keywords.</p>
   <p>The advantage of this approach is that the semantics of the language 
      adapted on purpose, so the resulting code is clean and consistent. No 
      &#39;trick&#39;. A drawback is that this approach is language-dependent, if your 
      aim is to develop a weaver, you have to develop a code enhancer for every 
      targeted language. See the
      <a href="/aop-net/compiletime-weaving/">Compile-Time 
      Weaving</a> techniques for details. A weaver developer should also ideally 
      provide integration with the IDE (Intellisense).</p>
   <p>It is not possible to write an aspect weaver of this type using PostSharp, 
      because PostSharp supposes that the code has already been compiled. Also,
      <a href="/aop-net/runtime-weaving/">Runtime Weaving</a> 
      techniques are all unadapted for this scenario.</p>
</div>
