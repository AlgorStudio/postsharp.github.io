---
layout: post
title: "Architecture"
date: 2008-12-03 20:06:14 +01:00
categories: [General]
permalink: /post/architecture.html
---
<h1>         Architecture</h1>         <p>         PostSharp is designed as an <strong>extensible platform</strong> for          post-processing of .NET assemblies. All analysis and transformations are          encapsulated into <strong>tasks</strong>, which are packaged into <strong>plug-ins</strong>          and loaded in the platform. This platform is named <strong>PostSharp Core</strong>,          while we group under the term <strong>PostSharp</strong> all the members of this          product family.         </p>         <p>Most of people use existing plug-ins, like PostSharp Laos. They do             not need any extensive knowledge of PostSharp Core and MSIL. If you             have more specific requirements, or if you are an Independent             Software Vendor producing development tools, you may want to develop             your own plug-ins, or even to integrate the platform into your             existing tools. </p>            <p style="text-align: center"><img src="/assets/2008-12-03-architecture/architecture.png" alt="PostSharp Architecture" title="PostSharp Architecture" /></p>     <h2>PostSharp Core</h2>     <p>PostSharp Core is the naked platform, coming with no high-level         functionality for the end-user. However, it offers a comprehensive and         reliable infrastructure on which any assembly post-processing application         can rely.</p>     <p>PostSharp Core is made of the following components:</p>     <ul>         <li>The <strong>Code Object Model</strong> represents with high precision and          fidelity any assembly of .NET 2.0, 3.0 or 3.5. It offers high usability          and performance. Among useful features of this component: cross-module          binding, <em>System.Reflection</em> binding, complex indexing, custom          tagging. The Code Object Model is the most fundamental component of          PostSharp Core.</li>         <li>The <strong>Module Reader</strong> and <strong>Module Writer</strong> are responsible          for parsing binary assemblies into the Code Object Model and writing          them back to binary form.</li>         <li>The <strong>Low-Level Code Weaver</strong> allows injection of MSIL          instructions into existing methods. It performs the demanding task of          detecting join points and restructuring existing instructions. It serves          as a base for weavers of higher level like Laos, while allowing many          high-level weavers to coexist peacefully when applied on the same          assembly.</li>         <li>The <strong>Platform Infrastructure</strong> manages the whole          post-compilation process. It resolves tasks dependencies, load plug-ins          on demand, and execute tasks in the proper order. Tasks can be included          explicitly in projects by users, or they can be automatically detected          during the post-compilation process.</li>     </ul>     <h2>Extension Points</h2>     <p>There are typically three ways to develop for PostSharp: writing         plug-ins, using PostSharp as a class library, or bootstrapping the         platform infrastructure.</p>     <h3>Writing Plug-Ins</h3>     <p>This is what you will probably do if you need to offer a functionality         that cannot be implemented with full satisfaction by other plug-ins.</p>     <p>Plug-ins can use all functionalities of PostSharp Core and of any other         plug-in; therefore, you can focus on the real added value of your         component, and let infrastructure concerns up to PostSharp.</p>     <p>Plug-ins are sets of tasks, whose dependencies are described in the <strong>        plug-in manifest</strong>.</p>     <p><strong>PostSharp Laos</strong> is a good example of plug-in offering added-value         features over PostSharp Core.</p>     <h3>Using PostSharp As a Class Library</h3>     <p>If you don't need the burden of the Platform Infrastructure, but still         want to use PostSharp Core, you can use it as a class library. Most         functionalities are available even without the Platform Infrastructure.</p>     <p>For instance, you can develop a Reflector-like decompiler based on         PostSharp Core.</p>     <h3>Bootstrapping the Platform Infrastructure</h3>     <p>PostSharp comes with three bootstrappers (or <em>hosts</em>): the MSBuild         task, the <strong>nant</strong> task, and the command-line utility.</p>     <p>If you need to embed assembly-transformation capability in your         application, you should consider to host the PostSharp Platform         Infrastructure. This is the case, for instance, if you develop an         application server. </p>
