---
layout: post
title: "Companion Files"
date: 2008-12-12 08:57:56 +01:00
categories: [General]
permalink: /post/companion-files.html
---
<h1>Companion Files</h1>
<p>The idea here is to use external files (text files or XML files) to apply 
   aspects on the base code. The weaving can be done at any time using any 
   technique (<a href="/aop-net/compiletime-weaving/">Compile-Time 
   Weaving</a> or <a href="/aop-net/runtime-weaving/">
   Runtime Weaving</a>). Even if this approach is extremely flexible and 
   reasonably easy for the weaver developer, it may be impractical, in some 
   situations, not to have the possibility to apply aspects to a class in the 
   same source file as this class.</p>
<p>A good example is taken from the Policy Injection application Block of the
   <span>
   <a href="http://www.codeplex.com/entlib">Enterprise Library</a></span>:</p>
<pre xml:lang="xml">&lt;policies&gt;
     &lt;add name=&quot;Authorize and Audit&quot;&gt;
       &lt;matchingRules&gt;
         &lt;add type=&quot;Microsoft.Practices.EnterpriseLibrary.PolicyInjection.MatchingRules.NamespaceMatchingRule, Microsoft.Practices.EnterpriseLibrary.PolicyInjection&quot; 
              name=&quot;Namespace Matching Rule&quot; 
              match=&quot;PolicyInjectionQuickStart.BusinessLogic&quot; 
              ignoreCase=&quot;false&quot; /&gt;
       &lt;/matchingRules&gt;
       &lt;handlers&gt;
         &lt;add name=&quot;Logging Handler&quot; 
              type=&quot;Microsoft.Practices.EnterpriseLibrary.PolicyInjection.CallHandlers.LogCallHandler, Microsoft.Practices.EnterpriseLibrary.PolicyInjection.CallHandlers&quot; 
              logBehavior=&quot;BeforeAndAfter&quot;
              beforeMessage=&quot;Before&quot; 
              afterMessage=&quot;After&quot; 
              includeParameterValues=&quot;true&quot; 
              includeCallTime=&quot;true&quot; 
              includeCallStack=&quot;false&quot; 
              severity=&quot;Information&quot;&gt;
           &lt;categories&gt;
             &lt;add name=&quot;Audit&quot; /&gt;
           &lt;/categories&gt;
         &lt;/add&gt;
       &lt;/handlers&gt;
    &lt;/add&gt;
 &lt;/policies&gt;
</pre>
<p>XML companion files may be difficult to read by humans, but they can easily 
   be generated by interactive configuration tool.s</p>
<p>PostSharp can be used as a base to develop such weavers, but the integration 
   with the build process should be customized.</p>
